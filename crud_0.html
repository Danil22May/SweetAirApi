<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Locations</title>
</head>
<body>
    <h1>CRUD Locations</h1>
    <div id="locations"></div>
    <script>
        async function fetchLocations() {
            try {
                const response = await fetch('http://localhost:3000/api/locations');
                const data = await response.json();
                displayLocations(data);
            } catch (error) {
                console.error('Error:', error);
            }
        }

        function displayLocations(data) {
            const locationsDiv = document.getElementById('locations');
            locationsDiv.innerHTML = data.map(item => `
                <div>
                    <h2>${item.name}</h2>
                    <pre>${JSON.stringify(item.info, null, 2)}</pre>
                    <button onclick="updateLocation(${item.id})">Update</button>
                    <button onclick="deleteLocation(${item.id})">Delete</button>
                </div>
            `).join('');
        }

        async function updateLocation(id) {
            const name = prompt('Enter new name:');
            const info = prompt('Enter new info (in JSON format):');
            try {
                const response = await fetch(`http://localhost:3000/api/locations/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ name, info })
                });
                if (response.ok) {
                    fetchLocations();
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        async function deleteLocation(id) {
            try {
                const response = await fetch(`http://localhost:3000/api/locations/${id}`, {
                    method: 'DELETE'
                });
                if (response.ok) {
                    fetchLocations();
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        fetchLocations();
    </script>
</body>
</html>
